// prisma/schema.prisma

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

generator client {
  provider = "prisma-client-js"
}

model User {
  id            String         @id @default(uuid())
  email         String         @unique
  username      String         @unique
  name          String?
  createdAt     DateTime       @default(now())
  quizResponse  QuizResponse?
  stacks        StackItem[]
  socialLinks   Json?
}

model StackItem {
  id           String   @id @default(uuid())
  userId       String
  title        String
  imageUrl     String?
  linkUrl      String?
  category     String   // e.g. "Language", "Framework", etc.
  position     Int      // ordering index within that category
  createdAt    DateTime @default(now())

  user         User     @relation(fields: [userId], references: [id])
}

model RecommendedStack {
  id           String   @id @default(uuid())
  title        String
  imageUrl     String
  linkUrl      String?
  category     String
}

model QuizResponse {
  id            String   @id @default(uuid())
  userId        String?  @unique       // ‚Üê MAKE UNIQUE for one-to-one
  sessionId     String   @unique
  questionPairs Json
  chosen        Json
  createdAt     DateTime @default(now())

  user          User?    @relation(fields: [userId], references: [id])
}